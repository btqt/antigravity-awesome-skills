---
name: commit
description: "Tạo các thông báo cam kết tuân theo các quy ước của Sentry. Sử dụng khi cam kết các thay đổi mã, viết thông báo cam kết, hoặc định dạng lịch sử git. Tuân theo các cam kết quy ước với các tham chiếu vấn đề cụ thể của Sentry."
source: "https://github.com/getsentry/skills/tree/main/plugins/sentry-skills/skills/commit"
risk: safe
---

# Thông báo Cam kết Sentry

Tuân theo các quy ước này khi tạo các cam kết cho các dự án Sentry.

## Khi nào Sử dụng Kỹ năng Này

Sử dụng kỹ năng này khi:

- Cam kết các thay đổi mã
- Viết thông báo cam kết
- Định dạng lịch sử git
- Tuân theo các quy ước cam kết của Sentry
- Tham chiếu các vấn đề Sentry trong các cam kết

## Điều kiện tiên quyết

Trước khi cam kết, hãy đảm bảo bạn đang làm việc trên một nhánh tính năng, không phải nhánh chính (main).

```bash
# Kiểm tra nhánh hiện tại
git branch --show-current
```

Nếu bạn đang ở trên `main` hoặc `master`, hãy tạo một nhánh mới trước:

```bash
# Tạo và chuyển sang một nhánh mới
git checkout -b <type>/<short-description>
```

Tên nhánh nên tuân theo mẫu: `<type>/<short-description>` trong đó type khớp với loại cam kết (ví dụ: `feat/add-user-auth`, `fix/null-pointer-error`, `ref/extract-validation`).

## Định dạng

```
<type>(<scope>): <subject>

<body>

<footer>
```

Tiêu đề là bắt buộc. Phạm vi (scope) là tùy chọn. Tất cả các dòng phải giữ dưới 100 ký tự.

## Các loại Cam kết

| Loại      | Mục đích                              |
| --------- | ------------------------------------- |
| `feat`    | Tính năng mới                         |
| `fix`     | Sửa lỗi                               |
| `ref`     | Tái cấu trúc (không thay đổi hành vi) |
| `perf`    | Cải thiện hiệu suất                   |
| `docs`    | Chỉ tài liệu                          |
| `test`    | Thêm hoặc sửa kiểm thử                |
| `build`   | Hệ thống xây dựng hoặc các phụ thuộc  |
| `ci`      | Cấu hình CI                           |
| `chore`   | Các tác vụ bảo trì                    |
| `style`   | Định dạng mã (không thay đổi logic)   |
| `meta`    | Siêu dữ liệu kho lưu trữ              |
| `license` | Các thay đổi giấy phép                |

## Quy tắc Dòng Chủ đề

- Sử dụng thì hiện tại, mệnh lệnh: "Add feature" không phải "Added feature"
- Viết hoa chữ cái đầu tiên
- Không có dấu chấm ở cuối
- Tối đa 70 ký tự

## Hướng dẫn Thân bài

- Giải thích **cái gì** và **tại sao**, không phải làm thế nào
- Sử dụng tâm trạng mệnh lệnh và thì hiện tại
- Bao gồm động lực cho sự thay đổi
- So sánh với hành vi trước đó khi có liên quan

## Chân trang: Tham chiếu Vấn đề

Tham chiếu các vấn đề trong chân trang bằng các mẫu sau:

```
Fixes GH-1234
Fixes #1234
Fixes SENTRY-1234
Refs LINEAR-ABC-123
```

- `Fixes` đóng vấn đề khi được hợp nhất
- `Refs` liên kết mà không đóng

## Các thay đổi được tạo bởi AI

Khi các thay đổi chủ yếu được tạo bởi một tác nhân mã hóa (như Claude Code), hãy bao gồm phân bổ Co-Authored-By trong chân trang cam kết:

```
Co-Authored-By: Claude <noreply@anthropic.com>
```

Đây là chỉ báo duy nhất về sự tham gia của AI nên xuất hiện trong các cam kết. Không thêm các cụm từ như "Generated by AI", "Written with Claude", hoặc các dấu hiệu tương tự trong chủ đề, thân bài, hoặc bất kỳ nơi nào khác trong thông báo cam kết.

## Ví dụ

### Sửa lỗi đơn giản

```
fix(api): Handle null response in user endpoint

The user API could return null for deleted accounts, causing a crash
in the dashboard. Add null check before accessing user properties.

Fixes SENTRY-5678
Co-Authored-By: Claude <noreply@anthropic.com>
```

### Tính năng với phạm vi

```
feat(alerts): Add Slack thread replies for alert updates

When an alert is updated or resolved, post a reply to the original
Slack thread instead of creating a new message. This keeps related
notifications grouped together.

Refs GH-1234
```

### Tái cấu trúc

```
ref: Extract common validation logic to shared module

Move duplicate validation code from three endpoints into a shared
validator class. No behavior change.
```

### Thay đổi phá vỡ

```
feat(api)!: Remove deprecated v1 endpoints

Remove all v1 API endpoints that were deprecated in version 23.1.
Clients should migrate to v2 endpoints.

BREAKING CHANGE: v1 endpoints no longer available
Fixes SENTRY-9999
```

## Định dạng Hoàn tác (Revert)

```
revert: feat(api): Add new endpoint

This reverts commit abc123def456.

Reason: Caused performance regression in production.
```

## Nguyên tắc

- Mỗi cam kết nên là một thay đổi ổn định, đơn lẻ
- Các cam kết nên có thể xem xét độc lập
- Kho lưu trữ nên ở trạng thái hoạt động sau mỗi cam kết

## Tham khảo

- [Sentry Commit Messages](https://develop.sentry.dev/engineering-practices/commit-messages/)
